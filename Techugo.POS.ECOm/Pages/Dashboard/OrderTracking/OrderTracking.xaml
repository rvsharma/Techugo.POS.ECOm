<UserControl x:Class="Techugo.POS.ECOm.Pages.Dashboard.OrderTracking.OrderTracking"
    xmlns:svg="http://sharpvectors.codeplex.com/svgc/"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="clr-namespace:Techugo.POS.ECOm.Converters"
    Height="Auto" Width="Auto">
    <UserControl.Resources>
        <conv:ActiveStateConverter x:Key="ActiveStateConverter"/>
        <conv:StatusToBackgroundConverter x:Key="StatusToBackgroundConverter" />
        <conv:StatusToForegroundConverter x:Key="StatusToForegroundConverter" />

        <!-- Reusable card style so all cards are identical in shape/size -->
        <Style x:Key="StatCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderBrush" Value="#E6E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Height" Value="100"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Opacity="0.03" BlurRadius="8" ShadowDepth="1"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Search box style -->
        <Style x:Key="SearchBoxStyle" TargetType="Border">
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="1"/>
            <Setter Property="Height" Value="40"/>
        </Style>

        <!-- Filter pill style (rounded pill with border) -->
        <Style x:Key="FilterPillBorder" TargetType="Border">
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="BorderBrush" Value="beige"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="8,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- Products ListView header style -->
        <Style x:Key="GridHeaderStyle" TargetType="GridViewColumnHeader">
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewColumnHeader">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Background="#FCFAFB">
        <StackPanel Margin="32">

            <Grid Margin="0,0,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <!-- Back Button -->
                <Border Grid.Column="0" Width="Auto" Height="36" Padding="8,0,12,0" Background="#fff" BorderBrush="#e3e3e3" CornerRadius="8" BorderThickness="1" MouseLeftButtonUp="BackButton_Click"
TouchUp="BackButton_Click" HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <svg:SvgViewbox Source="/Assets/Images/back.svg" Width="12" Height="12" VerticalAlignment="Center" Margin="8,0,8,0"/>
                        <TextBlock Text="Back to Dashboard" FontWeight="SemiBold" FontSize="14" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
                <!-- Spacer -->

                <!-- All Orders Title -->
                <StackPanel Grid.Column="2" Orientation="Vertical" VerticalAlignment="Center" Margin="16,0,0,0">
                    <TextBlock Text="Order Tracking" FontSize="24" FontWeight="Bold"/>
                    <TextBlock Text="Track real-time order status and rider location" FontSize="14" Foreground="#888" Margin="0,4,0,24"/>
                </StackPanel>
            </Grid>
            

            <!-- Stats row -->
            <Grid Margin="0,0,0,24" HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Total Products -->
                <Border
                   Background="#f3f8ff"
BorderBrush="#e0e0e0"
                    BorderThickness="1"
                    CornerRadius="20"
                    Margin="8"
                    Padding="0"
                    Height="150" Grid.Column="0">
                                    <Border
                         Background="#f3f8ff"
 BorderBrush="#2b7fff"
                        BorderThickness="4,0,0,0"
                        CornerRadius="20">
                        <StackPanel Margin="24">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Orders in Progress" FontWeight="SemiBold" FontSize="14" VerticalAlignment="Center"/>
                                <!--<svg:SvgViewbox Source="/Assets/Images/rejected.svg" Width="26" Height="26" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="8,0,0,0"/>-->
                            </Grid>
                            <TextBlock Text="{Binding InProgress}" FontWeight="Bold" FontSize="26" Margin="0,16,0,0"/>
                            <TextBlock Text="Currently being processed" FontSize="12" Foreground="#888" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>
                </Border>
                <Border
                    Background="#f0fdf4"
BorderBrush="#e0e0e0"
                    BorderThickness="1"
                    CornerRadius="20"
                    Margin="8"
                    Padding="0"
                    Height="150" Grid.Column="1">
                    <Border
                        Background="#f0fdf4"
BorderBrush="#00c951"
                        BorderThickness="4,0,0,0"
                        CornerRadius="20">
                        <StackPanel Margin="24">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Delivered Today" FontWeight="SemiBold" FontSize="14" VerticalAlignment="Center"/>
                                <!--<svg:SvgViewbox Source="/Assets/Images/rejected.svg" Width="26" Height="26" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="8,0,0,0"/>-->
                            </Grid>
                            <TextBlock Text="{Binding Completed}" FontWeight="Bold" FontSize="26" Margin="0,16,0,0"/>
                            <TextBlock Text="Successfully completed" FontSize="12" Foreground="#888" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>
                </Border>
            </Grid>


            <!-- Search + Filter row -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Search box -->
                <Border Style="{StaticResource SearchBoxStyle}" Grid.Column="0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- magnifier icon (simple Path) -->
                        <Viewbox Grid.Column="0" Width="20" Height="20" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <Canvas Width="24" Height="16">
                                <Path Data="M15.5,14h-0.79l-0.28-0.27A6.471,6.471,0,1,0,14,15.5l0.27,0.28v0.79L20,21.5,21.5,20,15.5,14z M6.5,11A4.5,4.5,0,1,1,11,15.5,4.5,4.5,0,0,1,6.5,11z"
                                      Fill="#9CA3AF" Stretch="Uniform"/>
                            </Canvas>
                        </Viewbox>

                        <!-- TextBox with overlay placeholder -->
                        <Grid Grid.Column="1" VerticalAlignment="Center">
                            <TextBox x:Name="SearchBox"
                                     BorderThickness="0"
                                     Background="Transparent"
                                     FontSize="14"
                                     Foreground="#111827"
                                     VerticalContentAlignment="Center"
                                     Padding="6,0"/>
                            <TextBlock Text="Search by product name, barcode, or category..."
                                       FontSize="14"
                                       Foreground="#9CA3AF"
                                       Margin="6,0,0,0"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Filter pill: rounded, icon on left and ComboBox content on right -->
                <Border Grid.Column="1" Style="{StaticResource FilterPillBorder}" Margin="12,0,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="49"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- filter icon -->
                        <Viewbox Grid.Column="0" Width="18" Height="20" VerticalAlignment="Center"   HorizontalAlignment="Center" >
                            <Canvas Width="12" Height="10"  >
                                <Path Data="M3,3 L13,3 L9,8 L9,13 L7,13 L7,8 Z" Fill="gray" Stretch="Uniform" />
                            </Canvas>
                        </Viewbox>

                        <!-- ComboBox with transparent background so pill shows rounded corners -->
                        <ComboBox Grid.Column="1"
                                  x:Name="BrandFilterCombo"
                                  Background="#F3F4F6"
                                  BorderThickness="0"
                                  Padding="6,0"
                                  VerticalContentAlignment="Center"
                                  HorizontalContentAlignment="Left"
                                  Foreground="#111827"
                                  SelectedIndex="0">
                            <ComboBoxItem IsSelected="True">All Brands</ComboBoxItem>
                            <ComboBoxItem>Mother Dairy</ComboBoxItem>
                            <ComboBoxItem>Safal</ComboBoxItem>
                            <ComboBoxItem>Dhara</ComboBoxItem>
                        </ComboBox>
                    </Grid>
                </Border>
            </Grid>

            <!-- Products Inventory Card (table) -->
            <Border Background="White" BorderBrush="#E6E7EB" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,24">
                <StackPanel>
                    <!-- Header -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16" VerticalAlignment="Center">
                        <TextBlock Text="Live Order Tracking" FontSize="16" FontWeight="Regular" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Products ListView -->
                    <ListView x:Name="ProductsListView" ItemsSource="{Binding orderData}" Margin="0" BorderThickness="0" SelectionMode="Single">
                        <!-- row style -->
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Background" Value="White"/>
                                <Setter Property="BorderBrush" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Padding" Value="0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="MinHeight" Value="64"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListViewItem">
                                            <Border x:Name="Bd"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  Padding="{TemplateBinding Padding}">
                                                <GridViewRowPresenter Content="{TemplateBinding Content}"
                                  Columns="{Binding Path=View.Columns, RelativeSource={RelativeSource AncestorType=ListView}}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <!-- Hover -->
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Bd" Property="Background" Value="#ececf0"/>
                                                </Trigger>

                                                <!-- Selected + active -->
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsSelected" Value="True"/>
                                                        <Condition Property="Selector.IsSelectionActive" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="Bd" Property="Background" Value="#ececf0"/>
                                                    <Setter Property="Foreground" Value="#0a0a0a"/>
                                                </MultiTrigger>

                                                <!-- Selected + inactive -->
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsSelected" Value="True"/>
                                                        <Condition Property="Selector.IsSelectionActive" Value="False"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="Bd" Property="Background" Value="#ececf0"/>
                                                    <Setter Property="Foreground" Value="#0a0a0a"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListView.ItemContainerStyle>

                        <ListView.View>
                            <GridView>

                                <!-- Barcode -->

                                <!--<GridViewColumn Header="Order ID" Width="150" DisplayMemberBinding="{Binding OrderNo}" />-->

                                <GridViewColumn Header="Order No" Width="150">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding OrderNo}" FontWeight="DemiBold" FontSize="14" HorizontalAlignment="Left"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>


                                <GridViewColumn Header="Rider Name" Width="180" DisplayMemberBinding="{Binding Rider.Name}" />

                                <!-- Status -->
                                <GridViewColumn Header="  Status" Width="150">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Background="{Binding Status, Converter={StaticResource StatusToBackgroundConverter}}"
                                                    CornerRadius="8" Padding="12,10" HorizontalAlignment="Left" Margin="0,6,0,6">
                                                <TextBlock Text="{Binding Status}" 
                                                       Foreground="{Binding Status, Converter={StaticResource StatusToForegroundConverter}}"
                                                       FontWeight="Normal" FontSize="15" HorizontalAlignment="Left"/>
                                            </Border>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Message" Width="Auto" DisplayMemberBinding="{Binding Message}" />


  
                            </GridView>
                        </ListView.View>

                        <ListView.Resources>
                            <Style TargetType="GridViewColumnHeader">
                                <Setter Property="Height" Value="48"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                                <Setter Property="FontSize" Value="14"/>
                                <Setter Property="Background" Value="White"/>
                                <Setter Property="BorderBrush" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="GridViewColumnHeader">
                                            <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListView.Resources>
                    </ListView>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>