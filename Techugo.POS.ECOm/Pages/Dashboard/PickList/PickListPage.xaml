<UserControl x:Class="Techugo.POS.ECOm.Pages.PickListPage"
              xmlns:svg="http://sharpvectors.codeplex.com/svgc/"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="Auto" Width="Auto" Background="WhiteSmoke" xmlns:convertors="clr-namespace:Techugo.POS.ECOm.Convertors">
    <UserControl.Resources>
        <convertors:ExpandCollapseIconConverter x:Key="ExpandCollapseIconConverter"/>
        <convertors:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <!-- other resources -->
    </UserControl.Resources>
    <StackPanel Margin="32" >
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" Width="Auto" Height="36" Padding="8,0,12,0" Background="#fff" BorderBrush="#e3e3e3" CornerRadius="8" BorderThickness="1" MouseLeftButtonUp="BackButton_Click"
TouchUp="BackButton_Click" HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <svg:SvgViewbox Source="/Assets/Images/back.svg" Width="12" Height="12" VerticalAlignment="Center" Margin="8,0,8,0"/>
                        <TextBlock Text="Back to Dashboard" FontWeight="SemiBold" FontSize="14" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

            <StackPanel Grid.Column="1" Margin="24,0,0,0" >
                <TextBlock Text="Pick List Orders" FontSize="24" FontWeight="Bold" Margin="0,0,0,4"/>
                <TextBlock Text="Item-wise picking with real-time weighing integration" FontSize="14" Foreground="#888"/>
            </StackPanel>
        </Grid>

        <!-- Weighing Scale Section -->
        <!--<Border Background="#F0F8FF" BorderThickness="1" BorderBrush="#ADD8E6" CornerRadius="8" Padding="18" Margin="0,24,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

        
                <StackPanel Grid.Column="0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#xE998;" FontFamily="Segoe MDL2 Assets" FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Digital Weighing Scale" FontWeight="SemiBold" Foreground ="DarkBlue" FontSize="16" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Real-time weight: 0.00 kg" FontSize="14" Foreground="#2196F3" Margin="24,4,0,0"/>
                </StackPanel>

           
                <Button Content="Simulate Weight" Grid.Column="1" Padding="12,4" FontSize="14" Background="#FFF" BorderBrush ="White" BorderThickness="1" Foreground ="Black" FontWeight="SemiBold" HorizontalAlignment="Right">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border"
                             Background="white"
                             BorderBrush="LightGray"           
                             BorderThickness="1"
                             CornerRadius="15"
                              Padding="10"
                             SnapsToDevicePixels="True">
                                <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                  
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="LightGray"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>

                </Button>
            </Grid>
        </Border>-->

        <Border Background="White" BorderThickness="1" BorderBrush="#E0E0E0" CornerRadius="8" Padding="18" Margin="0,24,0,0">
            <StackPanel>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,20">
                    <svg:SvgViewbox Source="/Assets/Images/pick_list_orders.svg" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock Text="{Binding PickListOrderText}" FontSize="16" FontWeight="Regular" VerticalAlignment="Center" Foreground="#222"/>
                </StackPanel>
                <Grid Margin="0,0,0,12" x:Name="PickListHeader">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.5*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1.5*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Order Details" FontWeight="DemiBold" FontSize="14" Grid.Column="0" Margin="0,0,0,0"/>
                    <TextBlock Text="Customer" FontWeight="DemiBold" FontSize="14" Grid.Column="1" Margin="0,0,0,0"/>
                    <TextBlock Text="Total Items" FontWeight="DemiBold" FontSize="14" Grid.Column="2" Margin="0,0,0,0"/>
                    <TextBlock Text="Order Value" FontWeight="DemiBold" FontSize="14" Grid.Column="3" Margin="0,0,0,0"/>
                    <TextBlock Text="Actions" FontWeight="DemiBold" FontSize="14" Grid.Column="4" Margin="0,0,0,0"/>
                </Grid>

          
                                            <TextBlock Text="No items to display" x:Name="NoItemsText"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Foreground="Gray" FontSize="14"/>
                                        

                <ItemsControl ItemsSource="{Binding PickListOrders}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <!-- Order Row -->
                                <Grid Background="#F7F8FA" Height="56" VerticalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="2.5*"/>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width="1.5*"/>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width="2*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Width="32" Height="32" Background="Transparent" BorderThickness="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left"
                                    Command="{Binding ToggleExpandCommand}">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border"
                                                      Background="Transparent"
                                                      BorderBrush="Transparent"
                                                      BorderThickness="1"
                                                      CornerRadius="8"
             
                                                      SnapsToDevicePixels="True">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                         VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <!-- Hover -->
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="Transparent"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                        <svg:SvgViewbox Source="{Binding IsExpanded, Converter={StaticResource ExpandCollapseIconConverter}}" Width="10" Height="10" VerticalAlignment="Center" Margin="8,0,8,0"/>
                                       
                                    </Button>
                                    <TextBlock Text="{Binding OrderNo}" FontWeight="SemiBold" FontSize="16" Grid.Column="0" Margin="40,0,0,0" VerticalAlignment="Center"/>
                                    <TextBlock FontSize="16" Grid.Column="1" VerticalAlignment="Center" FontWeight="SemiBold">
                                        <TextBlock.Text>
                                            <Binding Path="CustomerName" TargetNullValue="N/A" FallbackValue="N/A" />
                                        </TextBlock.Text>
                                    </TextBlock>
                                    <Border Background="#F3F4F6" CornerRadius="12" Padding="8,2" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding TotalItems, StringFormat={}{0} items}" FontWeight="SemiBold" FontSize="14" Foreground="#222"/>
                                    </Border>
                                    <TextBlock Text="{Binding OrderValue, StringFormat=₹{0:N2}}" FontWeight="Bold" FontSize="16" Grid.Column="3" VerticalAlignment="Center"/>
                                    <!-- Actions Column -->
                                    <StackPanel Grid.Column="4" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Width="Auto">
                                        <Button Command="{Binding ToggleExpandCommand}" Content="{Binding ActionsText}" FontSize="16" Foreground="#222" Background="Transparent" BorderBrush="Transparent" Width="Auto">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="border"
                                                         Background="Transparent"
                                                         BorderBrush="white"
                                                         BorderThickness="1"
                                                         CornerRadius="8"
                                                         SnapsToDevicePixels="True">
                                                        <ContentPresenter HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <!-- Hover -->
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="Transparent"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Height="36" Width="Auto" Margin="8,0,0,0" FontSize="14" Foreground="#fff" Background="#00a63e" BorderBrush="#00a63e" BorderThickness="1" Content="{Binding}" Click="Ready_Button_Click">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="border"
                                                         Background="#00a63e"
                                                         BorderBrush="#00a63e"
                                                         BorderThickness="1"
                                                         CornerRadius="8"
                                                         Padding="10,0"
                                                         SnapsToDevicePixels="True">
                                                        <ContentPresenter HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <!-- Hover -->
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="#008236"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                            <Button.ContentTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">

                                                        <svg:SvgViewbox Source="/Assets/Images/ready.svg" Width="14" Height="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="Ready" FontSize="14" Foreground="#fff" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </Button.ContentTemplate>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                                <!-- Expanded Details -->
                                <StackPanel Background="#eff6ff" Margin="0,0,0,0" Visibility="{Binding IsExpanded, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid Margin="0,0,0,0" Height="44">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="3*"/>
                                            <ColumnDefinition Width="1*"/>
                                            <ColumnDefinition Width="1*"/>
                                            <ColumnDefinition Width="1.5*"/>
                                            <ColumnDefinition Width="1.5*"/>
                                            <ColumnDefinition Width="1.5*"/>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Item Name" FontWeight="SemiBold" FontSize="14" Grid.Column="0" Foreground="#888" Margin="16,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="Size" FontWeight="SemiBold" FontSize="14" Grid.Column="1" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Qty" FontWeight="SemiBold" FontSize="14" Grid.Column="2" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Edit Qty" FontWeight="SemiBold" FontSize="14" Grid.Column="3" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Weight (kg)" FontWeight="SemiBold" FontSize="14" Grid.Column="4" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Rate (₹)" FontWeight="SemiBold" FontSize="14" Grid.Column="5" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Total (₹)" FontWeight="SemiBold" FontSize="14" Grid.Column="6" Foreground="#888" VerticalAlignment="Center"/>
                                        <TextBlock Text="Actions" FontWeight="SemiBold" FontSize="14" Grid.Column="7" Foreground="#888" VerticalAlignment="Center"/>
                                    </Grid>
                                    <ItemsControl ItemsSource="{Binding Items}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Margin="0,0,0,0" Height="50" Background="White">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="3*"/>
                                                        <ColumnDefinition Width="1*"/>
                                                        <ColumnDefinition Width="1*"/>
                                                        <ColumnDefinition Width="1.5*"/>
                                                        <ColumnDefinition Width="1.5*"/>
                                                        <ColumnDefinition Width="1.5*"/>
                                                        <ColumnDefinition Width="2*"/>
                                                        <ColumnDefinition Width="2*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center">
                                                        <!-- Rounded image using Rectangle with ImageBrush to respect corner radius -->
                                                        <Rectangle RadiusX="8" RadiusY="8" Width="40" Height="40" Margin="0,0,8,0" VerticalAlignment="Center">
                                                            <Rectangle.Fill>
                                                                <ImageBrush ImageSource="{Binding ImageUrl}" Stretch="UniformToFill"/>
                                                            </Rectangle.Fill>
                                                        </Rectangle>

                                                        <TextBlock Text="{Binding ItemName}" FontWeight="SemiBold" FontSize="15" VerticalAlignment="Center" Margin="0,0,16,0" />
                                                    </StackPanel>
                                                    <Border Background="#F3F4F6" CornerRadius="8" Padding="8,2" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                        <TextBlock Text="{Binding Size}" FontSize="13" Foreground="#222"/>
                                                    </Border>
                                                    <TextBlock Text="{Binding Qty}" FontSize="15" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <Border Background="#E6FFF2" CornerRadius="8" Padding="8,2" Grid.Column="3" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                        <TextBlock Text="{Binding EditQty}" FontSize="15" Foreground="#00C853" FontWeight="SemiBold"/>
                                                    </Border>
                                                    <StackPanel Orientation="Horizontal" Grid.Column="4" VerticalAlignment="Center">
                                                        <svg:SvgViewbox Source="/Assets/Images/balance_edit_qty.svg" Width="14" Height="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Weight}" FontSize="15" Foreground="#222"/>
                                                    </StackPanel>
                                                    <TextBlock Grid.Column="5" FontSize="15" VerticalAlignment="Center">
                                                      <Run Text="₹"/>
                                                      <Run Text="{Binding SPrice, StringFormat={}{0:N2}, FallbackValue=0.00}"/>             
                                                    </TextBlock>
                                                    <!-- Total (₹) -->
                                                    <TextBlock Grid.Column="6" FontWeight="Bold" FontSize="15" VerticalAlignment="Center">
                                                      <Run Text="₹"/>
                                                      <Run Text="{Binding Amount, StringFormat={}{0:N2}, FallbackValue=0.00}"/>
                                                    </TextBlock>
                                                    <Button Grid.Column="7" Height="32" Padding="12,0" Background="White" BorderBrush="#E0E0E0" BorderThickness="1"  HorizontalAlignment="Left" VerticalAlignment="Center"
                                                            Click="EditQty_Click">
                                                        <Button.Template>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border x:Name="border"
                                                                     Background="white"
                                                                     BorderBrush="#E0E0E0"
                                                                     BorderThickness="1"
                                                                     CornerRadius="8"
                                                                     Padding="8,0"
                                                                     SnapsToDevicePixels="True">
                                                                    <ContentPresenter HorizontalAlignment="Left"
                                                                        VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <!-- Hover -->
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter TargetName="border" Property="Background" Value="#e9ebef"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Button.Template>
                                                        <StackPanel Orientation="Horizontal">
                                                            <svg:SvgViewbox Source="/Assets/Images/edit.svg" Width="15" Height="15" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                                            <TextBlock Text="Edit Qty" FontSize="12" Foreground="#222" FontWeight="DemiBold"/>
                                                        </StackPanel>
                                                    </Button>
                                                </Grid>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                                <Separator Margin="0,0,0,0" Background="#F0F0F0" Height="1"/>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>
