<UserControl x:Class="Techugo.POS.ECOm.Pages.Dashboard.PickList.EditPickList"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Techugo.POS.ECOm.Pages.Dashboard.PickList" Height="Auto" Width="Auto">
    <UserControl.Resources>
        <!-- Implicit style that makes RadioButton outer border invisible while keeping a checked indicator -->
        <Style TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="{TemplateBinding Padding}">
                            <!-- Outer circle with transparent stroke -->
                            <Grid Width="18" Height="18" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Ellipse Fill="Transparent" Stroke="Transparent" />
                                <!-- inner dot, shown when checked -->
                                <Ellipse x:Name="Dot" Width="7" Height="7" Fill="Transparent" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>

                            <ContentPresenter x:Name="contentPresenter"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          Margin="6,0,0,0"
                                          VerticalAlignment="Center"
                                          RecognizesAccessKey="True"/>
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Dot" Property="Fill" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Foreground}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="contentPresenter" Property="Opacity" Value="0.6"/>
                                <Setter TargetName="Dot" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <!-- Full screen overlay -->
        <Rectangle Fill="#AA888888" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>

        <!-- Centered popup -->
        <Border Width="510" Padding="20" CornerRadius="12" Background="White"
            HorizontalAlignment="Center" VerticalAlignment="Center"
            BorderBrush="#E2E6EA" BorderThickness="1">
            <Border.Effect>
                <DropShadowEffect Color="#888" BlurRadius="16" ShadowDepth="0" Opacity="0.5"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding TitleText}" FontSize="18" FontWeight="Bold" Foreground="#111"/>
                        <TextBlock Text="Measure and verify the actual quantity" FontSize="13" Foreground="#6B6B6B" Margin="0,6,0,0"/>
                    </StackPanel>

                    <Button Grid.Column="1" Content="✕" Width="36" Height="36" 
                        Background="Transparent" BorderThickness="0" Foreground="#666"
                        Click="Close_Click"/>
                </Grid>

                <!-- SKU / Ordered Qty -->
                <Grid Grid.Row="1" Margin="0,16,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="SKU" FontSize="12" Foreground="#666" Margin="4,0,0,4"/>
                        <Border Background="#F3F4F6" CornerRadius="6" Padding="10">
                            <TextBox Text="{Binding SKU}" Background="Transparent" BorderThickness="0" IsReadOnly="True" FontWeight="SemiBold"/>
                        </Border>
                    </StackPanel>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Ordered Quantity" FontSize="12" Foreground="#666" Margin="4,0,0,4"/>
                        <Border Background="#F3F4F6" CornerRadius="6" Padding="10">
                            <TextBox Text="{Binding OrderedQty}" Background="Transparent" BorderThickness="0" IsReadOnly="True" FontWeight="SemiBold"/>
                        </Border>
                    </StackPanel>
                </Grid>

                <!-- Body -->
                <StackPanel Grid.Row="2" Orientation="Vertical" VerticalAlignment="Top" >

                    <!-- POS steps -->
                    <Border Background="#EDF6FF" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                        <StackPanel>
                            <TextBlock Text="POS" Foreground="#0A5BB7" FontWeight="Bold" Margin="0,0,0,8"/>
                            <StackPanel Orientation="Vertical">
                                <StackPanel Orientation="Horizontal" Margin="4,2">
                                    <RadioButton IsChecked="True" GroupName="Mode" VerticalAlignment="Center"/>
                                    <TextBlock Text="1. Check Weight" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="4,2">
                                    <RadioButton GroupName="Mode" VerticalAlignment="Center"/>
                                    <TextBlock Text="2. Enter Measured Qty (POS)" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Callout -->
                    <Border Background="#FFF7DE" BorderBrush="#FFE7A8" BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚖" FontSize="20" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <StackPanel>
                                <TextBlock Text="Put your item in machine to measure" FontWeight="SemiBold" Foreground="#8A5D00"/>
                                <TextBlock Text="Place the item on the weighing scale" Foreground="#8A5D00" Opacity="0.8" FontSize="12"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Price per KG -->
                    <TextBlock Text="Price per KG" FontSize="12" Foreground="#666" Margin="0,0,0,6"/>
                    <Border Background="#F3F4F6" CornerRadius="6" Padding="10" Margin="0,0,0,12">
                        <TextBox Text="{Binding PricePerKgDisplay, Mode=OneWay}" Background="Transparent" BorderThickness="0" IsReadOnly="True" FontWeight="SemiBold"/>
                    </Border>

                    <!-- Original / Measured / Diff -->
                    <Grid Margin="0,8,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" HorizontalAlignment="Left" Margin="0,0,8,0">
                            <TextBlock Text="Original Amount" FontSize="12" Foreground="#666" Margin="0,0,0,6"/>
                            <Border Background="#EDF7FF" Padding="10" CornerRadius="6">
                                <TextBlock Text="{Binding OriginalAmountDisplay}" FontWeight="SemiBold" Foreground="#0A5BB7"/>
                            </Border>
                        </StackPanel>

                        <StackPanel Grid.Column="1" HorizontalAlignment="Center" Margin="0,0,8,0">
                            <TextBlock Text="Measured Amount (POS)" FontSize="12" Foreground="#666" Margin="0,0,0,6"/>
                            <Border Background="#E8FFF1" Padding="10" CornerRadius="6">
                                <TextBlock Text="{Binding MeasuredAmountDisplay}" FontWeight="SemiBold" Foreground="#0A7F3A"/>
                            </Border>
                        </StackPanel>

                        <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                            <TextBlock Text="Difference" FontSize="12" Foreground="#666" Margin="0,0,0,6"/>
                            <Border Background="#E9FFEE" Padding="10" CornerRadius="6">
                                <TextBlock Text="{Binding DifferenceDisplay}" FontWeight="SemiBold" Foreground="#0A7F3A"/>
                            </Border>
                        </StackPanel>
                    </Grid>

                </StackPanel>

                <!-- Footer buttons -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                    <Button Width="120" Height="40" Margin="0,0,12,0" Click="Cancel_Click"
                        Background="#FFF" BorderBrush="#D7D7D7" BorderThickness="1" FontWeight="SemiBold" Content="Cancel"/>
                    <Button Width="120" Height="40" Click="Save_Click"
                        Background="#0A0A16" Foreground="White" BorderBrush="#0A0A16" FontWeight="SemiBold" Content="Save"/>
                </StackPanel>

            </Grid>
        </Border>
    </Grid>
</UserControl>
